import{b as u,H as p,G as l}from"./index.66e15d46.js";import{h,i as y}from"./use-transition.424067a1.js";const o=[];let i;function m(e){i=e.keyCode===27}function v(){i===!0&&(i=!1)}function g(e){i===!0&&(i=!1,u(e,27)===!0&&o[o.length-1](e))}function f(e){window[e]("keydown",m),window[e]("blur",v),window[e]("keyup",g),i=!1}function w(e){p.is.desktop===!0&&(o.push(e),o.length===1&&f("addEventListener"))}function x(e){const n=o.indexOf(e);n>-1&&(o.splice(n,1),o.length===0&&f("removeEventListener"))}const s=[];function a(e){s[s.length-1](e)}function K(e){p.is.desktop===!0&&(s.push(e),s.length===1&&document.body.addEventListener("focusin",a))}function L(e){const n=s.indexOf(e);n>-1&&(s.splice(n,1),s.length===0&&document.body.removeEventListener("focusin",a))}function c(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const n=parseInt(e,10);return isNaN(n)?0:n}var _=l({name:"close-popup",beforeMount(e,{value:n}){const t={depth:c(n),handler(r){t.depth!==0&&setTimeout(()=>{const d=h(e);d!==void 0&&y(d,r,t.depth)})},handlerKey(r){u(r,13)===!0&&t.handler(r)}};e.__qclosepopup=t,e.addEventListener("click",t.handler),e.addEventListener("keyup",t.handlerKey)},updated(e,{value:n,oldValue:t}){n!==t&&(e.__qclosepopup.depth=c(n))},beforeUnmount(e){const n=e.__qclosepopup;e.removeEventListener("click",n.handler),e.removeEventListener("keyup",n.handlerKey),delete e.__qclosepopup}});export{_ as C,x as a,K as b,w as c,L as r};
